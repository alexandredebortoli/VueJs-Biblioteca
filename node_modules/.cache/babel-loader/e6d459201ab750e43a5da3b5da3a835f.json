{"remainingRequest":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/babel-loader/lib/index.js!/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/src/modules/usuario/views/UsuarioEditPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/src/modules/usuario/views/UsuarioEditPage.vue","mtime":1661169290000},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/babel.config.js","mtime":1661169290000},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/cache-loader/dist/cjs.js","mtime":1661188924946},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/babel-loader/lib/index.js","mtime":1661188927724},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/cache-loader/dist/cjs.js","mtime":1661188924946},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1661188935383}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdG9hc3RFcnJvciB9IGZyb20gJ0Avc2VydmljZXMvdG9hc3RTZXJ2aWNlJzsKaW1wb3J0IHsgVVNVQVJJT19FUlJPUlMgfSBmcm9tICdAL21vZHVsZXMvdXN1YXJpby91c3VhcmlvLmNvbnN0YW50cyc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tY3ljbGUKCmltcG9ydCB7IGdvVG9PcGVuVXN1YXJpbywgZ29Ub1VzdWFyaW9Ob3RGb3VuZCB9IGZyb20gJ0AvbW9kdWxlcy91c3VhcmlvL3VzdWFyaW8ucm91dGVzJzsKaW1wb3J0IHsgc2F2ZVVzdWFyaW8gYXMgX3NhdmVVc3VhcmlvLCBnZXRVc3VhcmlvIH0gZnJvbSAnQC9tb2R1bGVzL3VzdWFyaW8vdXN1YXJpby5zZXJ2aWNlJzsKaW1wb3J0IEJpYmxpb3RlY2FTaW5nbGVDb250ZW50TGF5b3V0IGZyb20gJ0AvbGF5b3V0cy9TaW5nbGVDb250ZW50TGF5b3V0LnZ1ZSc7CmltcG9ydCBCaWJsaW90ZWNhVXN1YXJpb0VkaXRJbnB1dHMgZnJvbSAnQC9tb2R1bGVzL3VzdWFyaW8vY29tcG9uZW50cy9Vc3VhcmlvRWRpdElucHV0cy52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0JpYmxpb3RlY2FVc3VhcmlvRWRpdFBhZ2UnLAogIGNvbXBvbmVudHM6IHsKICAgIEJpYmxpb3RlY2FTaW5nbGVDb250ZW50TGF5b3V0OiBCaWJsaW90ZWNhU2luZ2xlQ29udGVudExheW91dCwKICAgIEJpYmxpb3RlY2FVc3VhcmlvRWRpdElucHV0czogQmlibGlvdGVjYVVzdWFyaW9FZGl0SW5wdXRzCiAgfSwKICBwcm92aWRlOiBmdW5jdGlvbiBwcm92aWRlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgdXN1YXJpb0VkaXRWbSA9IHt9OwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHVzdWFyaW9FZGl0Vm0sICd1c3VhcmlvJywgewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gX3RoaXMudXN1YXJpbzsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gewogICAgICB1c3VhcmlvRWRpdFZtOiB1c3VhcmlvRWRpdFZtCiAgICB9OwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzdWFyaW86IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaWQ6IGZ1bmN0aW9uIGlkKCkgewogICAgICB2YXIgX3RoaXMkJHJvdXRlJHBhcmFtczsKCiAgICAgIHJldHVybiAoX3RoaXMkJHJvdXRlJHBhcmFtcyA9IHRoaXMuJHJvdXRlLnBhcmFtcykgPT09IG51bGwgfHwgX3RoaXMkJHJvdXRlJHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkJHJvdXRlJHBhcmFtcy5pZDsKICAgIH0sCiAgICBpc0VkaXRpbmc6IGZ1bmN0aW9uIGlzRWRpdGluZygpIHsKICAgICAgdmFyIF90aGlzJHVzdWFyaW87CgogICAgICByZXR1cm4gISEoKF90aGlzJHVzdWFyaW8gPSB0aGlzLnVzdWFyaW8pICE9PSBudWxsICYmIF90aGlzJHVzdWFyaW8gIT09IHZvaWQgMCAmJiBfdGhpcyR1c3VhcmlvLmlkKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy5pZCkgewogICAgICB0aGlzLmZldGNoVXN1YXJpbygpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy51c3VhcmlvID0ge307CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaFVzdWFyaW86IGZ1bmN0aW9uIGZldGNoVXN1YXJpbygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBnZXRVc3VhcmlvKHRoaXMuaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBfdGhpczIudXN1YXJpbyA9IGRhdGEuZGF0YTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzMi5saXZybyA9IG51bGw7CgogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIGdvVG9Vc3VhcmlvTm90Rm91bmQoX3RoaXMyLiRyb3V0ZXIpOwogICAgICAgIH0gZWxzZSBpZiAoZXJyLnJlc3BvbnNlLmRhdGEuZXJyb3JzID09PSBVU1VBUklPX0VSUk9SU1tlcnIucmVzcG9uc2Uuc3RhdHVzXSAmJiBlcnIucmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHsKICAgICAgICAgIGdvVG9Vc3VhcmlvTm90Rm91bmQoX3RoaXMyLiRyb3V0ZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0b2FzdEVycm9yKCdFcnJvIGFvIGJ1c2NhciBvIGxpdnJvJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzYXZlVXN1YXJpbzogZnVuY3Rpb24gc2F2ZVVzdWFyaW8oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgX3NhdmVVc3VhcmlvKHRoaXMudXN1YXJpbykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIGdvVG9PcGVuVXN1YXJpbyhfdGhpczMuJHJvdXRlciwgZGF0YSB8fCBfdGhpczMudXN1YXJpbyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdG9hc3RFcnJvcignRXJybyBhbyBzYWx2YXIgbyB1c3XDoXJpbycpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":"AAeA;AACA,qE,CACA;;AACA;AACA;AAEA;AACA;AAEA;EACAA,iCADA;EAEAC;IACAC,4DADA;IAEAC;EAFA,CAFA;EAMAC,OANA,qBAMA;IAAA;;IACA;IACAC;MACAC;QAAA;MAAA;IADA;IAGA;MAAAC;IAAA;EACA,CAZA;EAaAC,IAbA,kBAaA;IACA;MACAC;IADA;EAGA,CAjBA;EAkBAC;IACAC,EADA,gBACA;MAAA;;MACA;IACA,CAHA;IAIAC,SAJA,uBAIA;MAAA;;MACA;IACA;EANA,CAlBA;EA0BAC,OA1BA,qBA0BA;IACA;MACA;IACA,CAFA,MAEA;MACA;IACA;EACA,CAhCA;EAiCAC;IACAC,YADA,0BACA;MAAA;;MACAC,oBACAC,IADA,CACA;QACA;MACA,CAHA,EAIAC,KAJA,CAIA;QACA;;QACA;UACAC;QACA,CAFA,MAEA;UACAA;QACA,CAFA,MAEA;UACAC;QACA;MACA,CAbA;IAcA,CAhBA;IAiBAC,WAjBA,yBAiBA;MAAA;;MACAA,2BACAJ,IADA,CACA;QACAK;MACA,CAHA,EAIAJ,KAJA,CAIA;QAAA;MAAA,CAJA;IAKA;EAvBA;AAjCA","names":["name","components","BibliotecaSingleContentLayout","BibliotecaUsuarioEditInputs","provide","Object","get","usuarioEditVm","data","usuario","computed","id","isEditing","mounted","methods","fetchUsuario","getUsuario","then","catch","goToUsuarioNotFound","toastError","saveUsuario","goToOpenUsuario"],"sourceRoot":"src/modules/usuario/views","sources":["UsuarioEditPage.vue"],"sourcesContent":["<template>\n  <biblioteca-single-content-layout container-size=\"lg\">\n    <template #content>\n      <biblioteca-header v-if=\"isEditing\">\n        Editar Usuário\n      </biblioteca-header>\n      <biblioteca-header v-else>\n        Criar Usuário\n      </biblioteca-header>\n      <biblioteca-usuario-edit-inputs @save=\"saveUsuario\" />\n    </template>\n  </biblioteca-single-content-layout>\n</template>\n\n<script>\nimport { toastError } from '@/services/toastService';\nimport { USUARIO_ERRORS } from '@/modules/usuario/usuario.constants';\n// eslint-disable-next-line import/no-cycle\nimport { goToOpenUsuario, goToUsuarioNotFound } from '@/modules/usuario/usuario.routes';\nimport { saveUsuario, getUsuario } from '@/modules/usuario/usuario.service';\n\nimport BibliotecaSingleContentLayout from '@/layouts/SingleContentLayout.vue';\nimport BibliotecaUsuarioEditInputs from '@/modules/usuario/components/UsuarioEditInputs.vue';\n\nexport default {\n  name: 'BibliotecaUsuarioEditPage',\n  components: {\n    BibliotecaSingleContentLayout,\n    BibliotecaUsuarioEditInputs,\n  },\n  provide() {\n    const usuarioEditVm = {};\n    Object.defineProperty(usuarioEditVm, 'usuario', {\n      get: () => this.usuario,\n    });\n    return { usuarioEditVm };\n  },\n  data() {\n    return {\n      usuario: null,\n    };\n  },\n  computed: {\n    id() {\n      return this.$route.params?.id;\n    },\n    isEditing() {\n      return !!this.usuario?.id;\n    },\n  },\n  mounted() {\n    if (this.id) {\n      this.fetchUsuario();\n    } else {\n      this.usuario = {};\n    }\n  },\n  methods: {\n    fetchUsuario() {\n      getUsuario(this.id)\n        .then(data => {\n          this.usuario = data.data;\n        })\n        .catch(err => {\n          this.livro = null;\n          if (err) {\n            goToUsuarioNotFound(this.$router);\n          } else if ((err.response.data.errors === USUARIO_ERRORS[err.response.status] && err.response.status === 404)) {\n            goToUsuarioNotFound(this.$router);\n          } else {\n            toastError('Erro ao buscar o livro');\n          }\n        });\n    },\n    saveUsuario() {\n      saveUsuario(this.usuario)\n        .then(data => {\n          goToOpenUsuario(this.$router, data || this.usuario);\n        })\n        .catch(() => toastError('Erro ao salvar o usuário'));\n    },\n  },\n};\n</script>\n"]}]}