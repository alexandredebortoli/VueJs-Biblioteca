{"remainingRequest":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/babel-loader/lib/index.js!/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/src/modules/categoria/views/CategoriaEditPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/src/modules/categoria/views/CategoriaEditPage.vue","mtime":1661191735434},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/babel.config.js","mtime":1661169290000},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/cache-loader/dist/cjs.js","mtime":1661188924946},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/babel-loader/lib/index.js","mtime":1661188927724},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/cache-loader/dist/cjs.js","mtime":1661188924946},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1661188935383}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdG9hc3RFcnJvciB9IGZyb20gJ0Avc2VydmljZXMvdG9hc3RTZXJ2aWNlJzsKaW1wb3J0IHsgQ0FURUdPUklBX0VSUk9SUyB9IGZyb20gJ0AvbW9kdWxlcy9jYXRlZ29yaWEvY2F0ZWdvcmlhLmNvbnN0YW50cyc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tY3ljbGUKCmltcG9ydCB7IGdvVG9PcGVuQ2F0ZWdvcmlhLCBnb1RvQ2F0ZWdvcmlhTm90Rm91bmQgfSBmcm9tICdAL21vZHVsZXMvY2F0ZWdvcmlhL2NhdGVnb3JpYS5yb3V0ZXMnOwppbXBvcnQgeyBzYXZlQ2F0ZWdvcmlhIGFzIF9zYXZlQ2F0ZWdvcmlhLCBnZXRDYXRlZ29yaWEgfSBmcm9tICdAL21vZHVsZXMvY2F0ZWdvcmlhL2NhdGVnb3JpYS5zZXJ2aWNlJzsKaW1wb3J0IEJpYmxpb3RlY2FDYXRlZ29yaWFFZGl0SW5wdXRzIGZyb20gJ0AvbW9kdWxlcy9jYXRlZ29yaWEvY29tcG9uZW50cy9DYXRlZ29yaWFFZGl0SW5wdXRzLnZ1ZSc7CmltcG9ydCBCaWJsaW90ZWNhU2luZ2xlQ29udGVudExheW91dCBmcm9tICdAL2xheW91dHMvU2luZ2xlQ29udGVudExheW91dC52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0JpYmxpb3RlY2FDYXRlZ29yaWFFZGl0UGFnZScsCiAgY29tcG9uZW50czogewogICAgQmlibGlvdGVjYUNhdGVnb3JpYUVkaXRJbnB1dHM6IEJpYmxpb3RlY2FDYXRlZ29yaWFFZGl0SW5wdXRzLAogICAgQmlibGlvdGVjYVNpbmdsZUNvbnRlbnRMYXlvdXQ6IEJpYmxpb3RlY2FTaW5nbGVDb250ZW50TGF5b3V0CiAgfSwKICBwcm92aWRlOiBmdW5jdGlvbiBwcm92aWRlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgY2F0ZWdvcmlhRWRpdFZtID0ge307CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2F0ZWdvcmlhRWRpdFZtLCAnY2F0ZWdvcmlhJywgewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gX3RoaXMuY2F0ZWdvcmlhOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIGNhdGVnb3JpYUVkaXRWbTogY2F0ZWdvcmlhRWRpdFZtCiAgICB9OwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNhdGVnb3JpYTogbnVsbAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBpZDogZnVuY3Rpb24gaWQoKSB7CiAgICAgIHZhciBfdGhpcyQkcm91dGUkcGFyYW1zOwoKICAgICAgcmV0dXJuIChfdGhpcyQkcm91dGUkcGFyYW1zID0gdGhpcy4kcm91dGUucGFyYW1zKSA9PT0gbnVsbCB8fCBfdGhpcyQkcm91dGUkcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkcm91dGUkcGFyYW1zLmlkOwogICAgfSwKICAgIGlzRWRpdGluZzogZnVuY3Rpb24gaXNFZGl0aW5nKCkgewogICAgICB2YXIgX3RoaXMkY2F0ZWdvcmlhOwoKICAgICAgcmV0dXJuICEhKChfdGhpcyRjYXRlZ29yaWEgPSB0aGlzLmNhdGVnb3JpYSkgIT09IG51bGwgJiYgX3RoaXMkY2F0ZWdvcmlhICE9PSB2b2lkIDAgJiYgX3RoaXMkY2F0ZWdvcmlhLmlkKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy5pZCkgewogICAgICB0aGlzLmZldGNoQ2F0ZWdvcmlhKCk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNhdGVnb3JpYSA9IHt9OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hDYXRlZ29yaWE6IGZ1bmN0aW9uIGZldGNoQ2F0ZWdvcmlhKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGdldENhdGVnb3JpYSh0aGlzLmlkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMyLmNhdGVnb3JpYSA9IGRhdGEuZGF0YTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzMi5jYXRlZ29yaWEgPSBudWxsOwoKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICBnb1RvQ2F0ZWdvcmlhTm90Rm91bmQoX3RoaXMyLiRyb3V0ZXIpOwogICAgICAgIH0gZWxzZSBpZiAoZXJyLnJlc3BvbnNlLmRhdGEuZXJyb3JzID09PSBDQVRFR09SSUFfRVJST1JTW2Vyci5yZXNwb25zZS5zdGF0dXNdICYmIGVyci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNCkgewogICAgICAgICAgZ29Ub0NhdGVnb3JpYU5vdEZvdW5kKF90aGlzMi4kcm91dGVyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdG9hc3RFcnJvcignRXJybyBhbyBidXNjYXIgYSBjYXRlZ29yaWEnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVDYXRlZ29yaWE6IGZ1bmN0aW9uIHNhdmVDYXRlZ29yaWEoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgX3NhdmVDYXRlZ29yaWEodGhpcy5jYXRlZ29yaWEpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBnb1RvT3BlbkNhdGVnb3JpYShfdGhpczMuJHJvdXRlciwgZGF0YSB8fCBfdGhpczMuY2F0ZWdvcmlhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0b2FzdEVycm9yKCdFcnJvIGFvIHNhbHZhciBhIGNhdGVnb3JpYScpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":"AAeA;AACA,2E,CACA;;AACA;AACA;AAEA;AACA;AAEA;EACAA,mCADA;EAEAC;IACAC,4DADA;IAEAC;EAFA,CAFA;EAMAC,OANA,qBAMA;IAAA;;IACA;IACAC;MACAC;QAAA;MAAA;IADA;IAGA;MAAAC;IAAA;EACA,CAZA;EAaAC,IAbA,kBAaA;IACA;MACAC;IADA;EAGA,CAjBA;EAkBAC;IACAC,EADA,gBACA;MAAA;;MACA;IACA,CAHA;IAIAC,SAJA,uBAIA;MAAA;;MACA;IACA;EANA,CAlBA;EA0BAC,OA1BA,qBA0BA;IACA;MACA;IACA,CAFA,MAEA;MACA;IACA;EACA,CAhCA;EAiCAC;IACAC,cADA,4BACA;MAAA;;MACAC,sBACAC,IADA,CACA;QACA;MACA,CAHA,EAIAC,KAJA,CAIA;QACA;;QACA;UACAC;QACA,CAFA,MAEA;UACAA;QACA,CAFA,MAEA;UACAC;QACA;MACA,CAbA;IAcA,CAhBA;IAiBAC,aAjBA,2BAiBA;MAAA;;MACAA,+BACAJ,IADA,CACA;QACAK;MACA,CAHA,EAIAJ,KAJA,CAIA;QAAA;MAAA,CAJA;IAKA;EAvBA;AAjCA","names":["name","components","BibliotecaCategoriaEditInputs","BibliotecaSingleContentLayout","provide","Object","get","categoriaEditVm","data","categoria","computed","id","isEditing","mounted","methods","fetchCategoria","getCategoria","then","catch","goToCategoriaNotFound","toastError","saveCategoria","goToOpenCategoria"],"sourceRoot":"src/modules/categoria/views","sources":["CategoriaEditPage.vue"],"sourcesContent":["<template>\n  <biblioteca-single-content-layout container-size=\"lg\">\n    <template #content>\n      <biblioteca-header v-if=\"isEditing\">\n        Editar Categoria\n      </biblioteca-header>\n      <biblioteca-header v-else>\n        Criar Categoria\n      </biblioteca-header>\n      <biblioteca-categoria-edit-inputs @save=\"saveCategoria\" />\n    </template>\n  </biblioteca-single-content-layout>\n</template>\n\n<script>\nimport { toastError } from '@/services/toastService';\nimport { CATEGORIA_ERRORS } from '@/modules/categoria/categoria.constants';\n// eslint-disable-next-line import/no-cycle\nimport { goToOpenCategoria, goToCategoriaNotFound } from '@/modules/categoria/categoria.routes';\nimport { saveCategoria, getCategoria } from '@/modules/categoria/categoria.service';\n\nimport BibliotecaCategoriaEditInputs from '@/modules/categoria/components/CategoriaEditInputs.vue';\nimport BibliotecaSingleContentLayout from '@/layouts/SingleContentLayout.vue';\n\nexport default {\n  name: 'BibliotecaCategoriaEditPage',\n  components: {\n    BibliotecaCategoriaEditInputs,\n    BibliotecaSingleContentLayout,\n  },\n  provide() {\n    const categoriaEditVm = {};\n    Object.defineProperty(categoriaEditVm, 'categoria', {\n      get: () => this.categoria,\n    });\n    return { categoriaEditVm };\n  },\n  data() {\n    return {\n      categoria: null,\n    };\n  },\n  computed: {\n    id() {\n      return this.$route.params?.id;\n    },\n    isEditing() {\n      return !!this.categoria?.id;\n    },\n  },\n  mounted() {\n    if (this.id) {\n      this.fetchCategoria();\n    } else {\n      this.categoria = {};\n    }\n  },\n  methods: {\n    fetchCategoria() {\n      getCategoria(this.id)\n        .then(data => {\n          this.categoria = data.data;\n        })\n        .catch(err => {\n          this.categoria = null;\n          if (err) {\n            goToCategoriaNotFound(this.$router);\n          } else if ((err.response.data.errors === CATEGORIA_ERRORS[err.response.status] && err.response.status === 404)) {\n            goToCategoriaNotFound(this.$router);\n          } else {\n            toastError('Erro ao buscar a categoria');\n          }\n        });\n    },\n    saveCategoria() {\n      saveCategoria(this.categoria)\n        .then(data => {\n          goToOpenCategoria(this.$router, data || this.categoria);\n        })\n        .catch(() => toastError('Erro ao salvar a categoria'));\n    },\n  },\n};\n</script>\n"]}]}