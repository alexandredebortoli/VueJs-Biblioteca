{"remainingRequest":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/src/modules/categoria/views/CategoriaEditPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/src/modules/categoria/views/CategoriaEditPage.vue","mtime":1661191735434},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/cache-loader/dist/cjs.js","mtime":1661188924946},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/babel-loader/lib/index.js","mtime":1661188927724},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/cache-loader/dist/cjs.js","mtime":1661188924946},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1661188935383}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHRvYXN0RXJyb3IgfSBmcm9tICdAL3NlcnZpY2VzL3RvYXN0U2VydmljZSc7CmltcG9ydCB7IENBVEVHT1JJQV9FUlJPUlMgfSBmcm9tICdAL21vZHVsZXMvY2F0ZWdvcmlhL2NhdGVnb3JpYS5jb25zdGFudHMnOwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLWN5Y2xlCmltcG9ydCB7IGdvVG9PcGVuQ2F0ZWdvcmlhLCBnb1RvQ2F0ZWdvcmlhTm90Rm91bmQgfSBmcm9tICdAL21vZHVsZXMvY2F0ZWdvcmlhL2NhdGVnb3JpYS5yb3V0ZXMnOwppbXBvcnQgeyBzYXZlQ2F0ZWdvcmlhLCBnZXRDYXRlZ29yaWEgfSBmcm9tICdAL21vZHVsZXMvY2F0ZWdvcmlhL2NhdGVnb3JpYS5zZXJ2aWNlJzsKCmltcG9ydCBCaWJsaW90ZWNhQ2F0ZWdvcmlhRWRpdElucHV0cyBmcm9tICdAL21vZHVsZXMvY2F0ZWdvcmlhL2NvbXBvbmVudHMvQ2F0ZWdvcmlhRWRpdElucHV0cy52dWUnOwppbXBvcnQgQmlibGlvdGVjYVNpbmdsZUNvbnRlbnRMYXlvdXQgZnJvbSAnQC9sYXlvdXRzL1NpbmdsZUNvbnRlbnRMYXlvdXQudnVlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQmlibGlvdGVjYUNhdGVnb3JpYUVkaXRQYWdlJywKICBjb21wb25lbnRzOiB7CiAgICBCaWJsaW90ZWNhQ2F0ZWdvcmlhRWRpdElucHV0cywKICAgIEJpYmxpb3RlY2FTaW5nbGVDb250ZW50TGF5b3V0LAogIH0sCiAgcHJvdmlkZSgpIHsKICAgIGNvbnN0IGNhdGVnb3JpYUVkaXRWbSA9IHt9OwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNhdGVnb3JpYUVkaXRWbSwgJ2NhdGVnb3JpYScsIHsKICAgICAgZ2V0OiAoKSA9PiB0aGlzLmNhdGVnb3JpYSwKICAgIH0pOwogICAgcmV0dXJuIHsgY2F0ZWdvcmlhRWRpdFZtIH07CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2F0ZWdvcmlhOiBudWxsLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBpZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLnBhcmFtcz8uaWQ7CiAgICB9LAogICAgaXNFZGl0aW5nKCkgewogICAgICByZXR1cm4gISF0aGlzLmNhdGVnb3JpYT8uaWQ7CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLmlkKSB7CiAgICAgIHRoaXMuZmV0Y2hDYXRlZ29yaWEoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY2F0ZWdvcmlhID0ge307CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaENhdGVnb3JpYSgpIHsKICAgICAgZ2V0Q2F0ZWdvcmlhKHRoaXMuaWQpCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgICB0aGlzLmNhdGVnb3JpYSA9IGRhdGEuZGF0YTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgdGhpcy5jYXRlZ29yaWEgPSBudWxsOwogICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICBnb1RvQ2F0ZWdvcmlhTm90Rm91bmQodGhpcy4kcm91dGVyKTsKICAgICAgICAgIH0gZWxzZSBpZiAoKGVyci5yZXNwb25zZS5kYXRhLmVycm9ycyA9PT0gQ0FURUdPUklBX0VSUk9SU1tlcnIucmVzcG9uc2Uuc3RhdHVzXSAmJiBlcnIucmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpKSB7CiAgICAgICAgICAgIGdvVG9DYXRlZ29yaWFOb3RGb3VuZCh0aGlzLiRyb3V0ZXIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdG9hc3RFcnJvcignRXJybyBhbyBidXNjYXIgYSBjYXRlZ29yaWEnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBzYXZlQ2F0ZWdvcmlhKCkgewogICAgICBzYXZlQ2F0ZWdvcmlhKHRoaXMuY2F0ZWdvcmlhKQogICAgICAgIC50aGVuKGRhdGEgPT4gewogICAgICAgICAgZ29Ub09wZW5DYXRlZ29yaWEodGhpcy4kcm91dGVyLCBkYXRhIHx8IHRoaXMuY2F0ZWdvcmlhKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB0b2FzdEVycm9yKCdFcnJvIGFvIHNhbHZhciBhIGNhdGVnb3JpYScpKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["CategoriaEditPage.vue"],"names":[],"mappings":";AAeA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CategoriaEditPage.vue","sourceRoot":"src/modules/categoria/views","sourcesContent":["<template>\n  <biblioteca-single-content-layout container-size=\"lg\">\n    <template #content>\n      <biblioteca-header v-if=\"isEditing\">\n        Editar Categoria\n      </biblioteca-header>\n      <biblioteca-header v-else>\n        Criar Categoria\n      </biblioteca-header>\n      <biblioteca-categoria-edit-inputs @save=\"saveCategoria\" />\n    </template>\n  </biblioteca-single-content-layout>\n</template>\n\n<script>\nimport { toastError } from '@/services/toastService';\nimport { CATEGORIA_ERRORS } from '@/modules/categoria/categoria.constants';\n// eslint-disable-next-line import/no-cycle\nimport { goToOpenCategoria, goToCategoriaNotFound } from '@/modules/categoria/categoria.routes';\nimport { saveCategoria, getCategoria } from '@/modules/categoria/categoria.service';\n\nimport BibliotecaCategoriaEditInputs from '@/modules/categoria/components/CategoriaEditInputs.vue';\nimport BibliotecaSingleContentLayout from '@/layouts/SingleContentLayout.vue';\n\nexport default {\n  name: 'BibliotecaCategoriaEditPage',\n  components: {\n    BibliotecaCategoriaEditInputs,\n    BibliotecaSingleContentLayout,\n  },\n  provide() {\n    const categoriaEditVm = {};\n    Object.defineProperty(categoriaEditVm, 'categoria', {\n      get: () => this.categoria,\n    });\n    return { categoriaEditVm };\n  },\n  data() {\n    return {\n      categoria: null,\n    };\n  },\n  computed: {\n    id() {\n      return this.$route.params?.id;\n    },\n    isEditing() {\n      return !!this.categoria?.id;\n    },\n  },\n  mounted() {\n    if (this.id) {\n      this.fetchCategoria();\n    } else {\n      this.categoria = {};\n    }\n  },\n  methods: {\n    fetchCategoria() {\n      getCategoria(this.id)\n        .then(data => {\n          this.categoria = data.data;\n        })\n        .catch(err => {\n          this.categoria = null;\n          if (err) {\n            goToCategoriaNotFound(this.$router);\n          } else if ((err.response.data.errors === CATEGORIA_ERRORS[err.response.status] && err.response.status === 404)) {\n            goToCategoriaNotFound(this.$router);\n          } else {\n            toastError('Erro ao buscar a categoria');\n          }\n        });\n    },\n    saveCategoria() {\n      saveCategoria(this.categoria)\n        .then(data => {\n          goToOpenCategoria(this.$router, data || this.categoria);\n        })\n        .catch(() => toastError('Erro ao salvar a categoria'));\n    },\n  },\n};\n</script>\n"]}]}