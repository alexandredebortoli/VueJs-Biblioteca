{"remainingRequest":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/src/modules/usuario/views/UsuarioEditPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/src/modules/usuario/views/UsuarioEditPage.vue","mtime":1661169290000},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/cache-loader/dist/cjs.js","mtime":1661188924946},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/babel-loader/lib/index.js","mtime":1661188927724},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/cache-loader/dist/cjs.js","mtime":1661188924946},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1661188935383}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHRvYXN0RXJyb3IgfSBmcm9tICdAL3NlcnZpY2VzL3RvYXN0U2VydmljZSc7CmltcG9ydCB7IFVTVUFSSU9fRVJST1JTIH0gZnJvbSAnQC9tb2R1bGVzL3VzdWFyaW8vdXN1YXJpby5jb25zdGFudHMnOwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLWN5Y2xlCmltcG9ydCB7IGdvVG9PcGVuVXN1YXJpbywgZ29Ub1VzdWFyaW9Ob3RGb3VuZCB9IGZyb20gJ0AvbW9kdWxlcy91c3VhcmlvL3VzdWFyaW8ucm91dGVzJzsKaW1wb3J0IHsgc2F2ZVVzdWFyaW8sIGdldFVzdWFyaW8gfSBmcm9tICdAL21vZHVsZXMvdXN1YXJpby91c3VhcmlvLnNlcnZpY2UnOwoKaW1wb3J0IEJpYmxpb3RlY2FTaW5nbGVDb250ZW50TGF5b3V0IGZyb20gJ0AvbGF5b3V0cy9TaW5nbGVDb250ZW50TGF5b3V0LnZ1ZSc7CmltcG9ydCBCaWJsaW90ZWNhVXN1YXJpb0VkaXRJbnB1dHMgZnJvbSAnQC9tb2R1bGVzL3VzdWFyaW8vY29tcG9uZW50cy9Vc3VhcmlvRWRpdElucHV0cy52dWUnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdCaWJsaW90ZWNhVXN1YXJpb0VkaXRQYWdlJywKICBjb21wb25lbnRzOiB7CiAgICBCaWJsaW90ZWNhU2luZ2xlQ29udGVudExheW91dCwKICAgIEJpYmxpb3RlY2FVc3VhcmlvRWRpdElucHV0cywKICB9LAogIHByb3ZpZGUoKSB7CiAgICBjb25zdCB1c3VhcmlvRWRpdFZtID0ge307CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodXN1YXJpb0VkaXRWbSwgJ3VzdWFyaW8nLCB7CiAgICAgIGdldDogKCkgPT4gdGhpcy51c3VhcmlvLAogICAgfSk7CiAgICByZXR1cm4geyB1c3VhcmlvRWRpdFZtIH07CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXN1YXJpbzogbnVsbCwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaWQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5wYXJhbXM/LmlkOwogICAgfSwKICAgIGlzRWRpdGluZygpIHsKICAgICAgcmV0dXJuICEhdGhpcy51c3VhcmlvPy5pZDsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgaWYgKHRoaXMuaWQpIHsKICAgICAgdGhpcy5mZXRjaFVzdWFyaW8oKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMudXN1YXJpbyA9IHt9OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hVc3VhcmlvKCkgewogICAgICBnZXRVc3VhcmlvKHRoaXMuaWQpCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgICB0aGlzLnVzdWFyaW8gPSBkYXRhLmRhdGE7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIHRoaXMubGl2cm8gPSBudWxsOwogICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICBnb1RvVXN1YXJpb05vdEZvdW5kKHRoaXMuJHJvdXRlcik7CiAgICAgICAgICB9IGVsc2UgaWYgKChlcnIucmVzcG9uc2UuZGF0YS5lcnJvcnMgPT09IFVTVUFSSU9fRVJST1JTW2Vyci5yZXNwb25zZS5zdGF0dXNdICYmIGVyci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNCkpIHsKICAgICAgICAgICAgZ29Ub1VzdWFyaW9Ob3RGb3VuZCh0aGlzLiRyb3V0ZXIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdG9hc3RFcnJvcignRXJybyBhbyBidXNjYXIgbyBsaXZybycpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIHNhdmVVc3VhcmlvKCkgewogICAgICBzYXZlVXN1YXJpbyh0aGlzLnVzdWFyaW8pCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgICBnb1RvT3BlblVzdWFyaW8odGhpcy4kcm91dGVyLCBkYXRhIHx8IHRoaXMudXN1YXJpbyk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gdG9hc3RFcnJvcignRXJybyBhbyBzYWx2YXIgbyB1c3XDoXJpbycpKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["UsuarioEditPage.vue"],"names":[],"mappings":";AAeA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UsuarioEditPage.vue","sourceRoot":"src/modules/usuario/views","sourcesContent":["<template>\n  <biblioteca-single-content-layout container-size=\"lg\">\n    <template #content>\n      <biblioteca-header v-if=\"isEditing\">\n        Editar Usuário\n      </biblioteca-header>\n      <biblioteca-header v-else>\n        Criar Usuário\n      </biblioteca-header>\n      <biblioteca-usuario-edit-inputs @save=\"saveUsuario\" />\n    </template>\n  </biblioteca-single-content-layout>\n</template>\n\n<script>\nimport { toastError } from '@/services/toastService';\nimport { USUARIO_ERRORS } from '@/modules/usuario/usuario.constants';\n// eslint-disable-next-line import/no-cycle\nimport { goToOpenUsuario, goToUsuarioNotFound } from '@/modules/usuario/usuario.routes';\nimport { saveUsuario, getUsuario } from '@/modules/usuario/usuario.service';\n\nimport BibliotecaSingleContentLayout from '@/layouts/SingleContentLayout.vue';\nimport BibliotecaUsuarioEditInputs from '@/modules/usuario/components/UsuarioEditInputs.vue';\n\nexport default {\n  name: 'BibliotecaUsuarioEditPage',\n  components: {\n    BibliotecaSingleContentLayout,\n    BibliotecaUsuarioEditInputs,\n  },\n  provide() {\n    const usuarioEditVm = {};\n    Object.defineProperty(usuarioEditVm, 'usuario', {\n      get: () => this.usuario,\n    });\n    return { usuarioEditVm };\n  },\n  data() {\n    return {\n      usuario: null,\n    };\n  },\n  computed: {\n    id() {\n      return this.$route.params?.id;\n    },\n    isEditing() {\n      return !!this.usuario?.id;\n    },\n  },\n  mounted() {\n    if (this.id) {\n      this.fetchUsuario();\n    } else {\n      this.usuario = {};\n    }\n  },\n  methods: {\n    fetchUsuario() {\n      getUsuario(this.id)\n        .then(data => {\n          this.usuario = data.data;\n        })\n        .catch(err => {\n          this.livro = null;\n          if (err) {\n            goToUsuarioNotFound(this.$router);\n          } else if ((err.response.data.errors === USUARIO_ERRORS[err.response.status] && err.response.status === 404)) {\n            goToUsuarioNotFound(this.$router);\n          } else {\n            toastError('Erro ao buscar o livro');\n          }\n        });\n    },\n    saveUsuario() {\n      saveUsuario(this.usuario)\n        .then(data => {\n          goToOpenUsuario(this.$router, data || this.usuario);\n        })\n        .catch(() => toastError('Erro ao salvar o usuário'));\n    },\n  },\n};\n</script>\n"]}]}