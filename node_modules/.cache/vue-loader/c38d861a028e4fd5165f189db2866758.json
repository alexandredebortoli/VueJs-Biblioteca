{"remainingRequest":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/src/modules/categoria/views/LivroEditPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/src/modules/categoria/views/LivroEditPage.vue","mtime":1661169290000},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/cache-loader/dist/cjs.js","mtime":1661188924946},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/babel-loader/lib/index.js","mtime":1661188927724},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/cache-loader/dist/cjs.js","mtime":1661188924946},{"path":"/Users/alexandre/Documents/projeto-saks-developer/SAKS-main/biblioteca-front/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1661188935383}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHRvYXN0RXJyb3IgfSBmcm9tICdAL3NlcnZpY2VzL3RvYXN0U2VydmljZSc7CmltcG9ydCB7IExJVlJPX0VSUk9SUyB9IGZyb20gJ0AvbW9kdWxlcy9saXZyby9saXZyby5jb25zdGFudHMnOwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLWN5Y2xlCmltcG9ydCB7IGdvVG9PcGVuTGl2cm8sIGdvVG9MaXZyb05vdEZvdW5kIH0gZnJvbSAnQC9tb2R1bGVzL2xpdnJvL2xpdnJvLnJvdXRlcyc7CmltcG9ydCB7IHNhdmVMaXZybywgZ2V0TGl2cm8gfSBmcm9tICdAL21vZHVsZXMvbGl2cm8vbGl2cm8uc2VydmljZSc7CgppbXBvcnQgQmlibGlvdGVjYUxpdnJvRWRpdElucHV0cyBmcm9tICdAL21vZHVsZXMvbGl2cm8vY29tcG9uZW50cy9MaXZyb0VkaXRJbnB1dHMudnVlJzsKaW1wb3J0IEJpYmxpb3RlY2FTaW5nbGVDb250ZW50TGF5b3V0IGZyb20gJ0AvbGF5b3V0cy9TaW5nbGVDb250ZW50TGF5b3V0LnZ1ZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0JpYmxpb3RlY2FMaXZyb0VkaXRQYWdlJywKICBjb21wb25lbnRzOiB7CiAgICBCaWJsaW90ZWNhTGl2cm9FZGl0SW5wdXRzLAogICAgQmlibGlvdGVjYVNpbmdsZUNvbnRlbnRMYXlvdXQsCiAgfSwKICBwcm92aWRlKCkgewogICAgY29uc3QgbGl2cm9FZGl0Vm0gPSB7fTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsaXZyb0VkaXRWbSwgJ2xpdnJvJywgewogICAgICBnZXQ6ICgpID0+IHRoaXMubGl2cm8sCiAgICB9KTsKICAgIHJldHVybiB7IGxpdnJvRWRpdFZtIH07CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGl2cm86IG51bGwsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlkKCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGUucGFyYW1zPy5pZDsKICAgIH0sCiAgICBpc0VkaXRpbmcoKSB7CiAgICAgIHJldHVybiAhIXRoaXMubGl2cm8/LmlkOwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy5pZCkgewogICAgICB0aGlzLmZldGNoTGl2cm8oKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubGl2cm8gPSB7fTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGZldGNoTGl2cm8oKSB7CiAgICAgIGdldExpdnJvKHRoaXMuaWQpCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgICB0aGlzLmxpdnJvID0gZGF0YS5kYXRhOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICB0aGlzLmxpdnJvID0gbnVsbDsKICAgICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgZ29Ub0xpdnJvTm90Rm91bmQodGhpcy4kcm91dGVyKTsKICAgICAgICAgIH0gZWxzZSBpZiAoKGVyci5yZXNwb25zZS5kYXRhLmVycm9ycyA9PT0gTElWUk9fRVJST1JTW2Vyci5yZXNwb25zZS5zdGF0dXNdICYmIGVyci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNCkpIHsKICAgICAgICAgICAgZ29Ub0xpdnJvTm90Rm91bmQodGhpcy4kcm91dGVyKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRvYXN0RXJyb3IoJ0Vycm8gYW8gYnVzY2FyIG8gbGl2cm8nKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBzYXZlTGl2cm8oKSB7CiAgICAgIHNhdmVMaXZybyh0aGlzLmxpdnJvKQogICAgICAgIC50aGVuKGRhdGEgPT4gewogICAgICAgICAgZ29Ub09wZW5MaXZybyh0aGlzLiRyb3V0ZXIsIGRhdGEgfHwgdGhpcy5saXZybyk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gdG9hc3RFcnJvcignRXJybyBhbyBzYWx2YXIgbyBsaXZybycpKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["LivroEditPage.vue"],"names":[],"mappings":";AAeA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LivroEditPage.vue","sourceRoot":"src/modules/livro/views","sourcesContent":["<template>\n  <biblioteca-single-content-layout container-size=\"lg\">\n    <template #content>\n      <biblioteca-header v-if=\"isEditing\">\n        Editar Livro\n      </biblioteca-header>\n      <biblioteca-header v-else>\n        Criar Livro\n      </biblioteca-header>\n      <biblioteca-livro-edit-inputs @save=\"saveLivro\" />\n    </template>\n  </biblioteca-single-content-layout>\n</template>\n\n<script>\nimport { toastError } from '@/services/toastService';\nimport { LIVRO_ERRORS } from '@/modules/livro/livro.constants';\n// eslint-disable-next-line import/no-cycle\nimport { goToOpenLivro, goToLivroNotFound } from '@/modules/livro/livro.routes';\nimport { saveLivro, getLivro } from '@/modules/livro/livro.service';\n\nimport BibliotecaLivroEditInputs from '@/modules/livro/components/LivroEditInputs.vue';\nimport BibliotecaSingleContentLayout from '@/layouts/SingleContentLayout.vue';\n\nexport default {\n  name: 'BibliotecaLivroEditPage',\n  components: {\n    BibliotecaLivroEditInputs,\n    BibliotecaSingleContentLayout,\n  },\n  provide() {\n    const livroEditVm = {};\n    Object.defineProperty(livroEditVm, 'livro', {\n      get: () => this.livro,\n    });\n    return { livroEditVm };\n  },\n  data() {\n    return {\n      livro: null,\n    };\n  },\n  computed: {\n    id() {\n      return this.$route.params?.id;\n    },\n    isEditing() {\n      return !!this.livro?.id;\n    },\n  },\n  mounted() {\n    if (this.id) {\n      this.fetchLivro();\n    } else {\n      this.livro = {};\n    }\n  },\n  methods: {\n    fetchLivro() {\n      getLivro(this.id)\n        .then(data => {\n          this.livro = data.data;\n        })\n        .catch(err => {\n          this.livro = null;\n          if (err) {\n            goToLivroNotFound(this.$router);\n          } else if ((err.response.data.errors === LIVRO_ERRORS[err.response.status] && err.response.status === 404)) {\n            goToLivroNotFound(this.$router);\n          } else {\n            toastError('Erro ao buscar o livro');\n          }\n        });\n    },\n    saveLivro() {\n      saveLivro(this.livro)\n        .then(data => {\n          goToOpenLivro(this.$router, data || this.livro);\n        })\n        .catch(() => toastError('Erro ao salvar o livro'));\n    },\n  },\n};\n</script>\n"]}]}